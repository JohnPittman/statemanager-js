!function(t,e){"function"==typeof define&&define.amd?define(["./../../eventhandler/dist/EventHandler.min.js"],e):"object"==typeof exports?module.exports=e(require("eventhandler")):t.StateManager=e(t.EventHandler)}(this,function(t){"use strict";function e(e){t.call(this),this._owner=e||this,this._states={},this._currentStateId,this._previousStateId,this._initialStateId,this._started=!1}return e.prototype=Object.create(t.prototype),e.contructor=e,e.prototype.initialize=function(t,e){this.addStates(t),this.start(e)},e.prototype.addStates=function(t){for(var e in t)this._states[e]=t[e]},e.prototype._enterState=function(t,e){var i=void 0!==t.transitions;if(i===!0){var r=t.transitions.beforeEnter;void 0!==r&&r.call(this._owner,e);var a=t.transitions["beforeEnterFrom"+this._previousStateId];void 0!==a&&a.call(this._owner,e)}if(this.emit("beforeenterstate",e),t.enter.call(this._owner,e),i===!0){var n=t.transitions["enterFrom"+this._previousStateId];void 0!==n&&n.call(this._owner,e)}this.emit("enterstate",e)},e.prototype._leaveState=function(t,e,i){var r=void 0!==t.transitions;if(r===!0){var a=t.transitions.beforeLeave;void 0!==a&&a.call(this._owner,e);var n=t.transitions["beforeLeaveTo"+i];void 0!==n&&n.call(this._owner,e)}if(this.emit("beforeleavestate",e),t.leave.call(this._owner,e),r===!0){var s=t.transitions["leaveTo"+i];void 0!==s&&s.call(this._owner,e)}this.emit("leavestate",e)},e.prototype.changeState=function(t,e){var i={from:this._currentStateId.toString(),to:t,data:e};if(this._started===!0){var r=this._states[this._currentStateId];this._leaveState(r,i,t),r.initialized===!0&&void 0!==r.unload&&(r.unload.call(this._owner,e),r.initialized=!1)}this._setCurrentStateId(t);var a=this._states[t];a.initialized||void 0!==a.initialize&&(a.initialize.call(this._owner,e),a.initialized=!0),this._enterState(a,i)},e.prototype._setCurrentStateId=function(t){this._started===!0&&(this._previousStateId=this._currentStateId.toString()),this._currentStateId=t},e.prototype.start=function(t){var e=this._initialStateId=t||this._initialStateId;this._setCurrentStateId(e),this.changeState(e),this._started=!0},e.prototype.setInitialState=function(t){this._initialStateId=t},e.prototype.getCurrentState=function(){return this._currentStateId},e.prototype.getPreviousState=function(){return this._previousStateId},e});
//# sourceMappingURL=StateManager.min.map