!function(t,e){"function"==typeof define&&define.amd?define(["./../../eventhandler/dist/EventHandler.min.js"],e):"object"==typeof exports?module.exports=e(require("eventhandler")):t.StateManager=e(t.EventHandler)}(this,function(t){"use strict";function e(e){t.call(this),this._owner=e||this,this._states={},this._currentState,this._currentStateId,this._previousStateId,this._initialStateId,this._started=!1}return e.prototype=Object.create(t.prototype),e.contructor=e,e.prototype.initialize=function(t,e){this.addStates(t),this.start(e)},e.prototype.addStates=function(t){for(var e in t)this._states[e]=t[e]},e.prototype._enterState=function(t,e){if(void 0!==t.transitions){var i=t.transitions.beforeEnter;void 0!==i&&i.call(this._owner,e);var r=t.transitions["beforeEnterFrom"+this._previousStateId];void 0!==r&&r.call(this._owner,e)}this.emit("beforeenterstate",e),t.enter.call(this._owner,e),this.emit("enterstate",e)},e.prototype._leaveState=function(t,e,i){if(t.leave.call(this._owner,e),void 0!==t.transitions){var r=t.transitions["leaveTo"+i];void 0!==r&&r.call(this._owner,e)}this.emit("leavestate",e)},e.prototype.changeState=function(t,e){var i={from:this._currentStateId.toString(),to:t,data:e};this._setCurrentState(t),this._started===!0&&this._leaveState(this._states[this._previousStateId],i,t),this._enterState(this._currentState,i)},e.prototype.update=function(t){var e=this._currentState;if(e.enter.call(this._owner,t),void 0!==e.transitions){var i=e.transitions["enterFrom"+this._previousStateId];void 0!==i&&i.call(this._owner,t)}this.emit("updatestate",t)},e.prototype._setCurrentState=function(t){this._started===!0&&(this._previousStateId=this._currentStateId.toString()),this._currentStateId=t,this._currentState=this._states[this._currentStateId]},e.prototype.start=function(t){var e=this._initialStateId=t||this._initialStateId;this._setCurrentState(e),this.changeState(e),this._started=!0},e.prototype.setInitialState=function(t){this._initialStateId=t},e.prototype.getCurrentStateId=function(){return this._currentStateId},e.prototype.getPreviousState=function(){return this._previousStateId},e});
//# sourceMappingURL=StateManager.min.map