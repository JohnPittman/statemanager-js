!function(t,e){"function"==typeof define&&define.amd?define(["./../../eventhandler/dist/EventHandler.min.js"],e):"object"==typeof exports?module.exports=e(require("eventhandler")):t.StateManager=e(t.EventHandler)}(this,function(t){"use strict";function e(e){t.call(this),this._owner=e||this,this._states={},this._currentStateId,this._previousStateId,this._initialStateId,this._started=!1}return e.prototype=Object.create(t.prototype),e.contructor=e,e.prototype.initialize=function(t,e){this.addStates(t),this.start(e)},e.prototype.addStates=function(t){for(var e in t)this._states[e]=t[e]},e.prototype._enterState=function(t,e){if(void 0!==t.transitions){var i=t.transitions["enterFrom"+this._previousStateId];if(void 0!==i){var r=t.transitions["beforeEnterFrom"+this._previousStateId];void 0!==r&&r.call(this._owner,e),i.call(this._owner,e)}var n=t.transitions.beforeEnter;void 0!==n&&n.call(this._owner,e)}this.emit("enterstate",e),t.enter.call(this._owner,e)},e.prototype._leaveState=function(t,e,i){if(void 0!==t.transitions){var r=t.transitions["leaveTo"+i];if(void 0!==r){var n=t.transitions["beforeLeaveTo"+i];void 0!==n&&n.call(this._owner,e),r.call(this._owner,e)}var a=t.transitions.beforeLeave;void 0!==a&&a.call(this._owner,e)}this.emit("leavestate",e),t.leave.call(this._owner,e)},e.prototype.changeState=function(t,e){var i={from:this._currentStateId.toString(),to:t,data:e},r=this._states[this._currentStateId];this._started===!0&&(this._leaveState(r,i,t),r.initialized===!0&&void 0!==r.unload&&(r.unload.call(this._owner,e),r.initialized=!1)),this._setCurrentStateId(t);var n=this._states[t];n.initialized||void 0!==n.initialize&&(n.initialize.call(this._owner,e),n.initialized=!0),this._enterState(n,i)},e.prototype._setCurrentStateId=function(t){this._started===!0&&(this._previousStateId=this._currentStateId.toString()),this._currentStateId=t},e.prototype.start=function(t){var e=this._initialStateId=t||this._initialStateId;this._setCurrentStateId(e),this.changeState(e),this._started=!0},e.prototype.setInitialState=function(t){this._initialStateId=t},e.prototype.getCurrentState=function(){return this._currentStateId},e.prototype.getPreviousState=function(){return this._previousStateId},e});
//# sourceMappingURL=StateManager.min.map