!function(t,e){"function"==typeof define&&define.amd?define(["./../../eventhandler/dist/EventHandler.min.js"],e):"object"==typeof exports?module.exports=e(require("eventhandler")):t.StateManager=e(t.EventHandler)}(this,function(t){"use strict";function e(e){t.call(this),this._owner=e||this,this._states={},this._currentState,this._prevState,this._initialState}return e.prototype=Object.create(t.prototype),e.contructor=e,e.prototype.addStates=function(t,e){for(var r in t)this._states[r]=t[r];this.start(e)},e.prototype.enterState=function(t,e){var r=this._states[t];if(void 0!==r){this.setCurrentState(t);var i=r.transitions["onEnterFrom"+this._prevState];if(void 0!==i){var n=r.transitions["onBeforeEnterFrom"+this._prevState];void 0!==n&&n.call(this._owner,e),i.call(this._owner,e)}var a=r.transitions.onBeforeEnter;void 0!==a&&a.call(this._owner,e),this.emit("enterstate",e),r.enter.call(this._owner,e)}},e.prototype.leaveState=function(t,e){var r=this._states[this._currentState],i=r.transitions["onLeaveTo"+t];if(void 0!==i){var n=r.transitions["onBeforeLeaveTo"+t];void 0!==n&&n.call(this._owner),i.call(this._owner)}var a=r.transitions.onBeforeLeave;void 0!==a&&a.call(this._owner),r.leave.call(this._owner),this.emit("leavestate",e)},e.prototype.changeState=function(t,e){var r=(this._prevState,this._currentState),i={from:r,to:t,data:e};r!==this._prevState&&this.leaveState(t,i),this.enterState(t,i)},e.prototype.setCurrentState=function(t){this._prevState=void 0!==this._currentState?this._currentState.toString():t,this._currentState=t},e.prototype.start=function(t){var e=this._initialState=t||this._initialState;this.setCurrentState(e),this.changeState(e)},e.prototype.getCurrentState=function(){return this._currentState},e.prototype.getPreviousState=function(){return this._prevState},e});
//# sourceMappingURL=StateManager.min.map